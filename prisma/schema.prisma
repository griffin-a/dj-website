// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Event - photos: one to many 
// Event - hosts: many to many
// Event - videos: one to many 
model Event {
  id              Int             @id @default(autoincrement())
  title           String
  description     String
  paid            Boolean?
  capacity        Int?
  venue           String?
  date            DateTime?
  eventType       String?
  completed       Boolean?
  currentlyBooked Boolean?
  imageUri        String?
  hosts           Host[]
  photos          Photo[]
  videos          Video[]
  HostsOnEvents   HostsOnEvents[]
}

model Host {
  id            Int             @id @default(autoincrement())
  name          String?
  email         String?
  events        Event[]
  HostsOnEvents HostsOnEvents[]
}

// Association table: many-to-many
model HostsOnEvents {
  host    Host  @relation(fields: [hostId], references: [id])
  hostId  Int
  event   Event @relation(fields: [eventId], references: [id])
  eventId Int

  @@id([hostId, eventId])
}

model Photo {
  id      Int     @id @default(autoincrement())
  title   String?
  link    String?
  event   Event?  @relation(fields: [eventId], references: [id])
  eventId Int?
  tags    Tag[]
}

model Video {
  id      Int     @id @default(autoincrement())
  title   String?
  link    String?
  event   Event?  @relation(fields: [eventId], references: [id])
  eventId Int?
}

enum Tag {
  PARTY
  FREE
  PAID
  PRIVATE
  PUBLIC
  OTHER
  CLUB
  BAR
  HOUSE_PARTY
}
