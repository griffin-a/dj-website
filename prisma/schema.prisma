// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Event - photos: one to many 
// Event - hosts: many to many
model Event {
  id              String          @id @default(cuid())
  title           String
  description     String
  paid            Boolean?
  capacity        Int?
  venue           String?
  date            DateTime?
  eventType       String?
  completed       Boolean?
  currentlyBooked Boolean?
  imageUri        String?
  hosts           Host[]
  photos          Photo[]
  HostsOnEvents   HostsOnEvents[]
}

model Host {
  id            String          @id @default(cuid())
  name          String?
  email         String?
  events        Event[]
  HostsOnEvents HostsOnEvents[]
}

// Association table: many-to-many
model HostsOnEvents {
  host    Host   @relation(fields: [hostId], references: [id])
  hostId  String
  event   Event  @relation(fields: [eventId], references: [id])
  eventId String

  @@id([hostId, eventId])
}

model Photo {
  id      String  @id @default(cuid())
  title   String?
  link    String?
  event   Event?  @relation(fields: [eventId], references: [id])
  eventId String?
}
